# API Documentation - AccuBatt Web

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –ë–î

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫–∞–∑–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∑–∞–∫–∞–∑–∞–º–∏ —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã –∏ –æ—Ñ–∏—Å—ã.

#### –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (deprecated):
- `Orders` - –∑–∞–∫–∞–∑—ã —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã
- `OfficeOrders` - –æ—Ñ–∏—Å–Ω—ã–µ –∑–∞–∫–∞–∑—ã

#### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- `UnifiedOrders` - –µ–¥–∏–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- `OrderTypes` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ –∑–∞–∫–∞–∑–æ–≤ (postamat, office)

---

### –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### OrderTypes (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ –∑–∞–∫–∞–∑–æ–≤)
```json
{
  "type_id": 1,                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞ –∑–∞–∫–∞–∑–∞ (primary key)
  "type_name": "office",           // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞: "postamat" (–∑–∞–∫–∞–∑—ã —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã) –∏–ª–∏ "office" (–æ—Ñ–∏—Å–Ω—ã–µ –∑–∞–∫–∞–∑—ã)
  "type_description": "–û—Ñ–∏—Å–Ω—ã–µ –∑–∞–∫–∞–∑—ã", // –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–∫–∞–∑–∞
  "created_at": "2024-01-15 10:30:00"   // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD HH:MM:SS
}
```

#### UnifiedOrders (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤)
```json
{
  "order_id": 123,                 // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ (primary key, auto increment)
  "product_id": "456",             // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ —á–∏—Å–ª–æ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç legacy –¥–∞–Ω–Ω—ã—Ö)
  "client_id": "79123456789",      // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  "order_type_id": 1,              // FK –Ω–∞ OrderTypes - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–∫–∞–∑–∞ (1=office, 2=postamat)
  
  // –û–±—â–∏–µ –ø–æ–ª—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–∫–∞–∑–æ–≤
  "start_time": "2024-01-15 10:30:00",    // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD HH:MM:SS
  "end_time": "2024-01-15 18:30:00",      // –ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—Ä–µ–Ω–¥—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD HH:MM:SS
  "rental_time": 480,              // –í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –≤ –º–∏–Ω—É—Ç–∞—Ö (480 = 8 —á–∞—Å–æ–≤)
  "rental_amount": 240,            // –°—É–º–º–∞ –∞—Ä–µ–Ω–¥—ã –≤ —Ä—É–±–ª—è—Ö (–∫–æ–ø–µ–π–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
  "returned": 0,                   // –°—Ç–∞—Ç—É—Å –≤–æ–∑–≤—Ä–∞—Ç–∞: 0 = –Ω–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω (–∞–∫—Ç–∏–≤–Ω—ã–π), 1 = –≤–æ–∑–≤—Ä–∞—â–µ–Ω
  "renewal_time": null,            // –í—Ä–µ–º—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥—ã (nullable, —Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD HH:MM:SS)
  
  // –ü–æ–ª—è –¥–ª—è –æ—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (nullable –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã)
  "ready_for_return": 0,           // –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤–æ–∑–≤—Ä–∞—Ç—É: 0 = –Ω–µ –≥–æ—Ç–æ–≤, 1 = –≥–æ—Ç–æ–≤ –∫ –≤–æ–∑–≤—Ä–∞—Ç—É –≤ –æ—Ñ–∏—Å
  "issued": 1,                     // –°—Ç–∞—Ç—É—Å –≤—ã–¥–∞—á–∏: 0 = –Ω–µ –≤—ã–¥–∞–Ω, 1 = –≤—ã–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç—É
  "not_issued": 0,                 // –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞: 0 = –Ω–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω, 1 = –∑–∞–∫–∞–∑ –æ—Ç–∫–ª–æ–Ω–µ–Ω/–Ω–µ –≤—ã–¥–∞–Ω
  "accepted": 0,                   // –ü—Ä–∏–Ω—è—Ç–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞: 0 = –Ω–µ –ø—Ä–∏–Ω—è—Ç, 1 = –≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏–Ω—è—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º
  
  // –ü–æ–ª—è –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã (nullable –¥–ª—è –æ—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤)
  "order_date": null,              // –î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ –¥–ª—è –ø–æ—Å—Ç–∞–º–∞—Ç-–∑–∞–∫–∞–∑–æ–≤ (—Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD HH:MM:SS)
  "cell_id": null,                 // –ù–æ–º–µ—Ä —è—á–µ–π–∫–∏ –≤ –ø–æ—Å—Ç–∞–º–∞—Ç–µ (nullable)
  "postamat_id": null             // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Å—Ç–∞–º–∞—Ç–∞ (nullable)
}
```

#### WorkerRoles (—Ä–æ–ª–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤)
```json
{
  "role_id": 1,                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–æ–ª–∏ (primary key)
  "role_name": "office_worker",    // –°–∏—Å—Ç–µ–º–Ω–æ–µ –∏–º—è —Ä–æ–ª–∏: postamat_worker, office_worker, junior_admin, senior_admin, owner
  "role_description": "–û—Ñ–∏—Å–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫" // –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
}
```

#### Workers (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤)
```json
{
  "worker_id": 1,                  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ (primary key, auto increment)
  "worker_uid": "office_worker_01", // –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
  "worker_passwd": "hashed_password", // –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ (–Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ API –æ—Ç–≤–µ—Ç–∞—Ö)
  "role_id": 2,                    // FK –Ω–∞ WorkerRoles - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
  "created_at": "2024-01-15 09:00:00",   // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
  "is_active": 1                   // –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: 0 = –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω, 1 = –∞–∫—Ç–∏–≤–µ–Ω
}
```

#### OrderPhotos (—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–∞–∫–∞–∑–æ–≤)
```json
{
  "photo_id": 1,                   // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (primary key, auto increment)
  "order_id": 123,                 // FK –Ω–∞ UnifiedOrders - ID –∑–∞–∫–∞–∑–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è
  "photo_data": "binary_data",     // –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (LargeBinary, –¥–æ 16MB)
  "photo_type": 0,                 // –¢–∏–ø —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏: 0 = –¥–æ –∞—Ä–µ–Ω–¥—ã/–≤—ã–¥–∞—á–∏, 1 = –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
  "created_at": "2024-01-15 10:30:00",    // –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
  "file_name": "product_photo.jpg", // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (nullable)
  "file_size": 1024000,            // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö (nullable)
  "content_type": "image/jpeg"     // MIME —Ç–∏–ø —Ñ–∞–π–ª–∞: image/jpeg, image/png –∏ —Ç.–¥. (nullable)
}
```

#### Products (—Ç–æ–≤–∞—Ä—ã) - –æ–±–Ω–æ–≤–ª–µ–Ω–æ
```json
{
  "id": 1,                         // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞ (primary key)
  "name": "PowerBank 10000mAh",    // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (max 25 —Å–∏–º–≤–æ–ª–æ–≤)
  "description": "–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä –Ω–∞ 10000mAh", // –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (max 512 —Å–∏–º–≤–æ–ª–æ–≤)
  "price_per_hour": 15.0,          // –¶–µ–Ω–∞ –∞—Ä–µ–Ω–¥—ã –∑–∞ —á–∞—Å –≤ —Ä—É–±–ª—è—Ö
  "price_per_day": 200.0,          // –¶–µ–Ω–∞ –∞—Ä–µ–Ω–¥—ã –∑–∞ –¥–µ–Ω—å –≤ —Ä—É–±–ª—è—Ö
  "price_per_month": 3000.0,       // –¶–µ–Ω–∞ –∞—Ä–µ–Ω–¥—ã –∑–∞ –º–µ—Å—è—Ü –≤ —Ä—É–±–ª—è—Ö
  "image": "binary_data",          // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–¥–æ 16MB)
  "product_uuid": "550e8400-e29b-41d4-a716-446655440000", // UUID —Ç–æ–≤–∞—Ä–∞ –¥–ª—è QR-–∫–æ–¥–æ–≤
  "size": "medium",                // –†–∞–∑–º–µ—Ä —Ç–æ–≤–∞—Ä–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ —è—á–µ–π–∫–∞—Ö
  "category": "PowerBank",         // –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞
  "address_of_postamat": "–õ–µ–Ω–∏–Ω–∞ 5", // –ê–¥—Ä–µ—Å –ø–æ—Å—Ç–∞–º–∞—Ç–∞ (–µ—Å–ª–∏ —Ç–æ–≤–∞—Ä –≤ –ø–æ—Å—Ç–∞–º–∞—Ç–µ)
  "office_id": 2,                  // FK –Ω–∞ Office - ID –æ—Ñ–∏—Å–∞ (–µ—Å–ª–∏ —Ç–æ–≤–∞—Ä –≤ –æ—Ñ–∏—Å–µ)
  "who_is_reserved": "79123456789", // –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–≤—à–µ–≥–æ —Ç–æ–≤–∞—Ä
  "start_of_reservation": "2024-01-15 10:30:00", // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è
  "have_problem": 0                // –°—Ç–∞—Ç—É—Å –ø—Ä–æ–±–ª–µ–º —Å —Ç–æ–≤–∞—Ä–æ–º: 0 = –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º, 1 = –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
}
```

---

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ API –º–µ—Ç–æ–¥—ã

---

## GET /api/get-active-orders

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å UnifiedOrders)
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `UnifiedOrders` –≤–º–µ—Å—Ç–æ `OfficeOrders`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —Ç–∏–ø—É –∑–∞–∫–∞–∑–∞ "office"
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "order_id": 123,                 // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
    "client_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",    // –ü–æ–ª–Ω–æ–µ –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    "phone_number": "79123456789",   // –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
    "product_name": "PowerBank 10000mAh", // –ù–∞–∑–≤–∞–Ω–∏–µ –∞—Ä–µ–Ω–¥—É–µ–º–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    "address_office": "–õ–µ–Ω–∏–Ω–∞ 10",   // –ê–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã–¥–∞—á–∞/–≤–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞
    "order_type": "office",          // –¢–∏–ø –∑–∞–∫–∞–∑–∞: "office" –∏–ª–∏ "postamat"
    "start_time": "2024-01-15 10:30:00",    // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—ã
    "end_time": "2024-01-15 18:30:00",      // –ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—Ä–µ–Ω–¥—ã
    "rental_amount": 240,            // –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ –∑–∞ –∞—Ä–µ–Ω–¥—É –≤ —Ä—É–±–ª—è—Ö
    "rental_time": 480,              // –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã –≤ –º–∏–Ω—É—Ç–∞—Ö
    "issued": 1,                     // –°—Ç–∞—Ç—É—Å –≤—ã–¥–∞—á–∏: 0 = –Ω–µ –≤—ã–¥–∞–Ω, 1 = –≤—ã–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç—É
    "returned": 0,                   // –°—Ç–∞—Ç—É—Å –≤–æ–∑–≤—Ä–∞—Ç–∞: 0 = –Ω–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω, 1 = –≤–æ–∑–≤—Ä–∞—â–µ–Ω
    "ready_for_return": 0,           // –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤–æ–∑–≤—Ä–∞—Ç—É: 0 = –Ω–µ –≥–æ—Ç–æ–≤, 1 = –≥–æ—Ç–æ–≤
    "not_issued": 0,                 // –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 0 = –Ω–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω, 1 = –∑–∞–∫–∞–∑ –æ—Ç–∫–ª–æ–Ω–µ–Ω
    "accepted": 0                    // –ü—Ä–∏–Ω—è—Ç–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞: 0 = –Ω–µ –ø—Ä–∏–Ω—è—Ç, 1 = –ø—Ä–∏–Ω—è—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º
  }
]
```

---

## GET /api/get-order-details/{order_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å `UnifiedOrders` –∏ `OrderTypes`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∏–ø –∑–∞–∫–∞–∑–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `order_id` (URL, required) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ UnifiedOrders (integer)

**–û—Ç–≤–µ—Ç:**
```json
{
  "order_id": 123,                 // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞
  "product_id": "456",             // ID —Ç–æ–≤–∞—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ —á–∏—Å–ª–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å legacy –¥–∞–Ω–Ω—ã–º–∏)
  "client_id": "79123456789",      // ID –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ)
  "order_type": "office",          // –¢–∏–ø –∑–∞–∫–∞–∑–∞: "office" –¥–ª—è –æ—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤, "postamat" –¥–ª—è –ø–æ—Å—Ç–∞–º–∞—Ç–æ–≤
  "order_type_id": 1,              // –ß–∏—Å–ª–æ–≤–æ–π ID —Ç–∏–ø–∞ –∑–∞–∫–∞–∑–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã OrderTypes
  "client_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",    // –ü–æ–ª–Ω–æ–µ –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  "product_name": "PowerBank 10000mAh", // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  "start_time": "2024-01-15 10:30:00",    // –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∞—Ä–µ–Ω–¥—ã
  "end_time": "2024-01-15 18:30:00",      // –ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ/—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—Ä–µ–Ω–¥—ã
  "rental_time": 480,              // –û–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã –≤ –º–∏–Ω—É—Ç–∞—Ö
  "rental_amount": 240,            // –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ –≤ —Ä—É–±–ª—è—Ö (–±–µ–∑ –∫–æ–ø–µ–µ–∫)
  "address_office": "–õ–µ–Ω–∏–Ω–∞ 10",   // –ü–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞ –≤—ã–¥–∞—áÔøΩÔøΩ/–≤–æ–∑–≤—Ä–∞—Ç–∞
  "status": {                      // –û–±—ä–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–∞
    "issued": 1,                   // –í—ã–¥–∞—á–∞ —Ç–æ–≤–∞—Ä–∞: 0 = –Ω–µ –≤—ã–¥–∞–Ω, 1 = –≤—ã–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç—É
    "returned": 0,                 // –í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞: 0 = –Ω–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω, 1 = –≤–æ–∑–≤—Ä–∞—â–µ–Ω
    "ready_for_return": 0,         // –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤–æ–∑–≤—Ä–∞—Ç—É: 0 = –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, 1 = –≥–æ—Ç–æ–≤ –∫ —Å–¥–∞—á–µ
    "not_issued": 0,               // –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞: 0 = –ø—Ä–∏–Ω—è—Ç, 1 = –æ—Ç–∫–ª–æ–Ω–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º
    "accepted": 0                  // –ü—Ä–∏–Ω—è—Ç–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞: 0 = –Ω–µ –ø—Ä–∏–Ω—è—Ç, 1 = –≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏–Ω—è—Ç –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
  },
  "created_at": "2024-01-15 10:30:00",    // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
  "updated_at": "2024-01-15 11:00:00"     // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
}
```

---

## GET /api/owner/statistics

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã ÔøΩÔøΩ UnifiedOrders)
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** owner

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `UnifiedOrders` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—ÅÔøΩÔøΩ–º —Ç–∏–ø–∞–º –∑–∞–∫–∞–∑–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–¥–∏–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º –∑–∞–∫–∞–∑–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `period` (query, required) - –ü–µ—Ä–∏–æ–¥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
  - `"day"` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ —á–∞—Å–∞–º
  - `"week"` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –¥–Ω—è–º  
  - `"month"` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –¥–Ω—è–º

**–û—Ç–≤–µ—Ç:**
```json
{
  "income": 125000.0,              // –û–±—â–∏–π –¥–æ—Ö–æ–¥ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤ —Ä—É–±–ª—è—Ö
  "orders": 85,                    // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
  "clients": 42,                   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
  "labels": ["01.01", "02.01", "03.01"],  // –ü–æ–¥–ø–∏—Å–∏ –¥–ª—è –æ—Å–∏ X –≥—Ä–∞—Ñ–∏–∫–∞ (–¥–∞—Ç—ã –∏–ª–∏ —á–∞—Å—ã)
  "chart": [15000, 22000, 18000],  // –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
  "breakdown_by_type": {           // –†–∞–∑–±–∏–≤–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ç–∏–ø–∞–º –∑–∞–∫–∞–∑–æ–≤ (–Ω–æ–≤–æ–µ –ø–æ–ª–µ)
    "office": {                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ñ–∏—Å–Ω—ã–º –∑–∞–∫–∞–∑–∞–º
      "income": 75000.0,           // –î–æ—Ö–æ–¥ –æ—Ç –æ—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ —Ä—É–±–ª—è—Ö
      "orders": 45                 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
    },
    "postamat": {                  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–∫–∞–∑–∞–º —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã
      "income": 50000.0,           // –î–æ—Ö–æ–¥ –æ—Ç –ø–æ—Å—Ç–∞–º–∞—Ç–æ–≤ –≤ —Ä—É–±–ª—è—Ö
      "orders": 40                 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã
    }
  }
}
```

---

## POST /api/accept-office-return/{return_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏–Ω—è—Ç–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –æ—Ñ–∏—Å–µ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–æ)
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ò–∑–ºÔøΩÔøΩ–Ω–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å `UnifiedOrders` –≤–º–µ—Å—Ç–æ `OfficeOrders`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ `OrderTypes`
- **–ó–ê–ú–ï–ù–ï–ù–û:** `service_required` ‚Üí `have_problem`
- **–£–ë–†–ê–ù–û:** –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π API –¥–ª—è —Ñ–æ—Ç–æ)
- **–î–û–ë–ê–í–õ–ï–ù–û:** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –≤ –ø–æ–ª–µ `comment` –∑–∞–∫–∞–∑–∞
- **–î–û–ë–ê–í–õ–ï–ù–û:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–æ–±–ª–µ–º

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `return_id` (URL, required) - ID –∑–∞–∫–∞–∑–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ UnifiedOrders (integer)
- `have_problem` (form, optional) - –ï—Å—Ç—å –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–≤–∞—Ä–æ–º (boolean):
  - `true` - —Ç–æ–≤–∞—Ä –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã, –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –≤ —Ç–∞–±–ª–∏—Ü–µ products
  - `false` –∏–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ - —Ç–æ–≤–∞—Ä –≤ –ø–æ—Ä—è–¥–∫–µ
- `comment` (form, optional) - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ (string, max 1000 —Å–∏–º–≤–æ–ª–æ–≤)
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ `comment` —Ç–∞–±–ª–∏—Ü—ã `unified_orders`

**Content-Type:** application/x-www-form-urlencoded

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Return accepted successfully",
  "processed_data": {
    "have_problem": true,                    // –£–∫–∞–∑–∞–Ω–æ –ª–∏ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–±–ª–µ–º —Å —Ç–æ–≤–∞—Ä–æ–º
    "product_marked_as_problem": true,       // –ë—ã–ª –ª–∏ —Ç–æ–≤–∞—Ä –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ have_problem=true)
    "comment_saved": true                    // –ë—ã–ª –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  }
}
```

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞:**
   - `returned = 1` (–∑–∞–∫–∞–∑ –≤–æ–∑–≤—Ä–∞—â–µ–Ω)
   - `accepted = 1` (–≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏–Ω—è—Ç)
   - `updated_at` = —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è

2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:**
   - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `comment`, –æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ `comment` –∑–∞–∫–∞–∑–∞

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å —Ç–æ–≤–∞—Ä–æ–º:**
   - –ï—Å–ª–∏ `have_problem = true`, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ç–æ–≤–∞—Ä –ø–æ `product_id` –∏–∑ –∑–∞–∫–∞–∑–∞
   - –£ —Ç–æ–≤–∞—Ä–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `have_problem = 1`
   - –¢–æ–≤–∞—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ —Ç—Ä–µ–±—É—é—â–∏–π –≤–Ω–∏–º–∞–Ω–∏—è/—Ä–µ–º–æ–Ω—Ç–∞

---

## üì∏ API –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∑–∞–∫–∞–∑–æ–≤

### POST /api/orders/{order_id}/photos

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∑–∞–∫–∞–∑–∞
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `order_id` (URL, required) - ID –∑–∞–∫–∞–∑–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ UnifiedOrders (integer)
- `photo` (file, required) - –§–∞–π–ª —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPEG, PNG, GIF –∏ –¥—Ä—É–≥–∏–µ image/* —Ç–∏–ø—ã
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 16MB (16777215 –±–∞–π—Ç)
- `photo_type` (form, required) - –¢–∏–ø —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (integer):
  - `0` - —Ñ–æ—Ç–æ –¥–æ –∞—Ä–µ–Ω–¥—ã/–≤—ã–¥–∞—á–∏ —Ç–æ–≤–∞—Ä–∞ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏)
  - `1` - —Ñ–æ—Ç–æ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–∞ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ)

**Content-Type:** multipart/form-data

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ (—Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 16MB)
- –í–∞–ª–∏–¥–∞—Ü–∏—è photo_type (—Ç–æ–ª—å–∫–æ 0 –∏–ª–∏ 1)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "photo_id": 15,                          // ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
  "message": "Photo uploaded successfully",
  "photo_info": {
    "file_name": "product_photo.jpg",       // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    "file_size": 1024000,                   // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
    "content_type": "image/jpeg",           // MIME —Ç–∏–ø –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    "photo_type": 0,                        // –¢–∏–ø —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (0 –∏–ª–∏ 1)
    "created_at": "2024-01-15 10:30:00"     // –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD HH:MM:SS
  }
}
```

**–û—à–∏–±–∫–∏:**
- `404` - –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π photo_type –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### GET /api/orders/{order_id}/photos

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∑–∞–∫–∞–∑–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `order_id` (URL, required) - ID –∑–∞–∫–∞–∑–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ UnifiedOrders (integer)
- `photo_type` (query, optional) - –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (integer):
  - `0` - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –¥–æ –∞—Ä–µ–Ω–¥—ã
  - `1` - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
  - –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

**–û—Ç–≤–µ—Ç:**
```json
{
  "order_id": 123,                         // ID –∑–∞–∫–∞–∑–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏—Å—å —Ñ–æ—Ç–æ
  "photos": [
    {
      "photo_id": 15,                      // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
      "photo_type": 0,                     // –¢–∏–ø: 0 = –¥–æ –∞—Ä–µ–Ω–¥—ã, 1 = –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
      "file_name": "before_rental.jpg",    // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      "file_size": 1024000,                // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
      "content_type": "image/jpeg",
      "created_at": "2024-01-15 10:30:00", // –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
      "photo_url": "/api/photos/15"        // URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∞–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    },
    {
      "photo_id": 16,
      "photo_type": 1,
      "file_name": "after_return.jpg",
      "file_size": 856000,
      "content_type": "image/jpeg",
      "created_at": "2024-01-15 18:45:00",
      "photo_url": "/api/photos/16"
    }
  ],
  "total_photos": 2,                       // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è –∑–∞–∫–∞–∑–∞
  "photos_before": 1,                      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –¥–æ –∞—Ä–µ–Ω–¥—ã (photo_type=0)
  "photos_after": 1                        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ (photo_type=1)
}
```

**–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)

**–û—à–∏–±–∫–∏:**
- `404` - –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400` - –ù–µ–≤–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ photo_type
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### GET /api/photos/{photo_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `photo_id` (URL, required) - ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ OrderPhotos (integer)

**–û—Ç–≤–µ—Ç:**
- **Content-Type:** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π MIME —Ç–∏–ø (image/jpeg, image/png, –∏ —Ç.–¥.)
- **Body:** –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **Headers:**
  - `Content-Disposition: inline; filename="–∏–º—è_—Ñ–∞–π–ª–∞.jpg"` - –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```html
<!-- –ü—Ä—è–º–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ HTML -->
<img src="/api/photos/15" alt="–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ –¥–æ –∞—Ä–µ–Ω–¥—ã">

<!-- –ò–ª–∏ —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è -->
<a href="/api/photos/15" download>–°–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ</a>
```

**–û—à–∏–±–∫–∏:**
- `404` - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### DELETE /api/photos/{photo_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ ID (–Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** junior_admin, senior_admin, owner

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `photo_id` (URL, required) - ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (integer)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Photo deleted successfully",
  "deleted_photo_id": 15                   // ID —É–¥–∞–ª–µ–Ω–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
}
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ú–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∏ –≤–ª–∞–¥–µ–ª—å—Ü—É
- –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å backup –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º

**–û—à–∏–±–∫–∏:**
- `404` - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `403` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### GET /api/orders/{order_id}/photos/archive

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–∫–∞—á–∏–≤–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞ –≤—Å–µ—Ö —ÑÔøΩÔøΩ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∑–∞–∫–∞–∑–∞
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** junior_admin, senior_admin, owner

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `order_id` (URL, required) - ID –∑–∞–∫–∞–∑–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞ (integer)

**–û—Ç–≤–µ—Ç:**
- **Content-Type:** application/zip
- **Body:** ZIP –∞—Ä—Ö–∏–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∑–∞–∫–∞–∑–∞
- **Headers:**
  - `Content-Disposition: attachment; filename="order_123_photos.zip"`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–∞:**
```
order_123_photos.zip
‚îú‚îÄ‚îÄ before_rental_1.jpg          // –§–æ—Ç–æ –¥–æ –∞—Ä–µ–Ω–¥—ã (photo_type=0)
‚îú‚îÄ‚îÄ before_rental_2.jpg          // –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –¥–æ –∞—Ä–µ–Ω–¥—ã
‚îú‚îÄ‚îÄ after_return_1.jpg           // –§–æ—Ç–æ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ (photo_type=1)
‚îî‚îÄ‚îÄ after_return_2.jpg           // –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –§–∞–π–ª—ã –≤ –∞—Ä—Ö–∏–≤–µ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ content_type —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- –ï—Å–ª–∏ —É –∑–∞–∫–∞–∑–∞ –Ω–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 404

**–û—à–∏–±–∫–∏:**
- `404` - –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —É –Ω–µ–≥–æ –Ω–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- `403` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìà API –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞

### GET /api/get-product-history/{product_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–æ—â–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å–æ –≤—Å–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** office_worker, junior_admin, senior_admin, owner

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `product_id` (URL, required) - ID –ø—Ä–æ–¥—É–∫—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ (integer)

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –æ—Ç–≤–µ—Ç:**
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ (—Ü–µ–Ω—ã, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–±–ª–µ–º)
- –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ (–∏–∑ unified_orders –∏ legacy —Ç–∞–±–ª–∏—Ü)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞
- –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞ (–¥–æ –∞—Ä–µ–Ω–¥—ã –∏ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞)
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- Timeline –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "product_info": {
    "id": 1,
    "name": "PowerBank 10000mAh",
    "description": "–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä –≤—ã—Å–æ–∫–æ–π –µ–º–∫–æ—Å—Ç–∏",
    "category": "PowerBank",
    "size": "medium",
    "product_uuid": "550e8400-e29b-41d4-a716-446655440000",
    "pricing": {
      "price_per_hour": 15.0,              // –¶–µ–Ω–∞ –∑–∞ —á–∞—Å –∞—Ä–µ–Ω–¥—ã
      "price_per_day": 200.0,              // –¶–µ–Ω–∞ –∑–∞ –¥–µ–Ω—å –∞—Ä–µ–Ω–¥—ã
      "price_per_month": 3000.0             // –¶–µ–Ω–∞ –∑–∞ –º–µ—Å—è—Ü –∞—Ä–µ–Ω–¥—ã
    },
    "location": {
      "office_info": {                     // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ñ–∏—Å–µ (–µ—Å–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω)
        "id": 2,
        "address": "–õ–µ–Ω–∏–Ω–∞ 10",
        "coordinates": {
          "lat": "55.7558",
          "lng": "37.6176"
        }
      },
      "address_of_postamat": null           // –ê–¥—Ä–µ—Å –ø–æ—Å—Ç–∞–º–∞—Ç–∞ (–µ—Å–ª–∏ –Ω–µ –≤ –æ—Ñ–∏—Å–µ)
    },
    "status": {
      "have_problem": false,               // –ï—Å—Ç—å –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–≤–∞—Ä–æ–º
      "who_is_reserved": null,             // –ö–µ–º –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω
      "start_of_reservation": null         // –í—Ä–µ–º—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è
    },
    "image_url": "/get-product-image/1"    // URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
  },
  "orders_history": [                      // –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ, –Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
    {
      "order_id": 123,
      "order_type": "office",              // –¢–∏–ø –∑–∞–∫–∞–∑–∞: office/postamat
      "order_type_text": "–û—Ñ–∏—Å–Ω—ã–π –∑–∞–∫–∞–∑",
      "client_info": {                     // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ
        "id": 456,
        "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
        "phone_number": "79123456789",
        "banned": false                    // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –∫–ª–∏–µ–Ω—Ç
      },
      "timeline": {                        // –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ –∑–∞–∫–∞–∑–∞
        "created_at": "2024-01-15 10:30:00",
        "start_time": "2024-01-15 11:00:00",
        "end_time": "2024-01-15 19:00:00",
        "updated_at": "2024-01-15 19:15:00"
      },
      "rental_details": {                  // –î–µ—Ç–∞–ª–∏ –∞—Ä–µ–Ω–¥—ã
        "rental_time_minutes": 480,       // –í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –≤ –º–∏–Ω—É—Ç–∞—Ö
        "rental_time_hours": 8.0,         // –í—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –≤ —á–∞—Å–∞—Ö
        "rental_amount": 120,             // –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ
        "renewal_time": null              // –í—Ä–µ–º—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –±—ã–ª–æ)
      },
      "status": {                         // –î–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
        "code": "returned",               // –ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞
        "text": "–í–æ–∑–≤—Ä–∞—â–µ–Ω",              // –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
        "issued": true,                   // –í—ã–¥–∞–Ω –ª–∏ —Ç–æ–≤–∞—Ä
        "returned": true,                 // –í–æ–∑–≤—Ä–∞—Ç –ª–∏ —Ç–æ–≤–∞—Ä–∞
        "ready_for_return": false,        // –ì–æ—Ç–æ–≤ –ª–∏ –∫ –≤–æ–∑–≤—Ä–∞—Ç—É
        "accepted": true,                 // –ü—Ä–∏–Ω—è—Ç –ª–∏ –≤–æ–∑–≤—Ä–∞—Ç
        "not_issued": false               // –û—Ç–∫–ª–æ–Ω–µ–Ω –ª–∏ –∑–∞–∫–∞–∑
      },
      "location": {
        "address_office": "–õ–µ–Ω–∏–Ω–∞ 10"     // –ê–¥—Ä–µ—Å –æ—Ñ–∏—Å–∞ –¥–ª—è –æ—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
      },
      "comments": "–¢–æ–≤–∞—Ä –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏", // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ
      "has_problems": false,              // –ë—ã–ª–∏ –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–≤–∞—Ä–æ–º
      "photos": [                         // –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–∞–∫–∞–∑–∞
        {
          "photo_id": 15,
          "photo_type": 0,                // 0 = –¥–æ –∞—Ä–µ–Ω–¥—ã, 1 = –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞
          "photo_type_text": "–î–æ –∞—Ä–µ–Ω–¥—ã",
          "file_name": "before_rental.jpg",
          "file_size": 1024000,
          "content_type": "image/jpeg",
          "created_at": "2024-01-15 11:00:00",
          "photo_url": "/api/photos/15"   // URL –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ
        },
        {
          "photo_id": 16,
          "photo_type": 1,
          "photo_type_text": "–ü–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞",
          "file_name": "after_return.jpg",
          "file_size": 856000,
          "content_type": "image/jpeg",
          "created_at": "2024-01-15 19:00:00",
          "photo_url": "/api/photos/16"
        }
      ],
      "photos_count": 2                   // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è –∑–∞–∫–∞–∑–∞
    }
  ],
  "statistics": {                         // –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É
    "total_orders": 25,                   // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤
    "active_orders": 2,                   // –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
    "returned_orders": 22,                // –í–æ–∑–≤—Ä–∞—Ç–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
    "rejected_orders": 1,                 // –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
    "orders_by_type": {                   // –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –∑–∞–∫–∞–∑–æ–≤
      "office_orders": 15,                // –û—Ñ–∏—Å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
      "postamat_orders": 10               // –ó–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–∞–º–∞—Ç—ã
    },
    "financial": {                        // –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
      "total_revenue": 3750.0,            // –û–±—â–∏–π –¥–æ—Ö–æ–¥ –æ—Ç –ø—Ä–æ–¥—É–∫—Ç–∞
      "average_order_value": 150.0,       // –°—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞
      "revenue_per_hour": 18.75           // –î–æ—Ö–æ–¥ –∑–∞ —á–∞—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    },
    "usage": {                           // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
      "total_rental_hours": 200.0,       // –û–±—â–µ–µ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –≤ —á–∞—Å–∞—Ö
      "average_rental_time": 8.0,        // –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã –∑–∞ –∑–∞–∫–∞–∑
      "unique_clients": 18                // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
    },
    "photos": {                          // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º
      "total_photos": 45,                 // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
      "orders_with_photos": 20,           // –ó–∞–∫–∞–∑–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
      "photo_coverage": 80.0              // –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–∫–∞–∑–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
    },
    "problems": {                        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
      "problems_count": 2,                // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
      "product_has_problems": false,      // –ü–æ–º–µ—á–µ–Ω –ª–∏ –ø—Ä–æ–¥—É–∫—Ç –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π
      "problem_rate": 8.0                 // –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
    }
  },
  "timeline": {                          // –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ –∏—Å–ø–æ–ª—åÔøΩÔøΩ–æ–≤–∞–Ω–∏—è
    "first_order": {                     // –ü–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –ø—Ä–æ–¥—É–∫—Ç–∞
      "created_at": "2023-06-15 14:30:00",
      "start_time": "2023-06-15 15:00:00",
      "end_time": "2023-06-15 23:00:00",
      "updated_at": "2023-06-15 23:30:00"
    },
    "last_order": {                      // –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑ –ø—Ä–æ–¥—É–∫—Ç–∞
      "created_at": "2024-01-15 10:30:00",
      "start_time": "2024-01-15 11:00:00",
      "end_time": "2024-01-15 19:00:00",
      "updated_at": "2024-01-15 19:15:00"
    },
    "total_usage_days": null             // –û–±—â–∏–π –ø–µ—Ä–∏–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ)
  },
  "meta": {                              // –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ
    "generated_at": "2024-01-20 14:35:22", // –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞
    "total_records": 25,                 // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
    "data_sources": [                    // –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
      "unified_orders",
      "legacy_orders", 
      "order_photos",
      "users"
    ]
  }
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ endpoint:**

1. **–ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã `unified_orders`
   - –í–∫–ª—é—á–∞–µ—Ç legacy –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü `orders` –∏ `office_orders`
   - –ò–∑–±–µ–≥–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–º–µ—á–∞–µ—Ç legacy –∑–∞–∫–∞–∑—ã –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

2. **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤:**
   - –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ ID –∏ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –ü–æ–¥—Å—á–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö

3. **–°–∏—Å—Ç–µ–º–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:**
   - –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ "–¥–æ –∞—Ä–µ–Ω–¥—ã" (photo_type=0) –∏ "–ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—Ç–∞" (photo_type=1)
   - –ì–æ—Ç–æ–≤—ã–µ URL –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∑–∞–∫–∞–∑–æ–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

4. **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:** –æ–±—â–∏–π –¥–æ—Ö–æ–¥, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫, –¥–æ—Ö–æ–¥ –∑–∞ —á–∞—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - **–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** –æ–±—â–µ–µ –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞ –∑–∞–∫–∞–∑
   - **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:** –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–∫–∞–∑–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏, –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
   - **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –∑–∞–∫–∞–∑–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

5. **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–ª–∞–≥–æ–≤
   - –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–æ–±–ª–µ–º —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–∫–∞–∑–∞

6. **–í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ (Timeline):**
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä–≤–æ–º –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∑–∞–∫–∞–∑–µ —Ç–æ–≤–∞—Ä–∞
   - –ü–æ–ª–Ω–∞—è —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–±—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:** –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞:** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:** –∞–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è:** –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–º–æ–Ω—Ç–∞ –∏–ª–∏ –∑–∞–º–µ–Ω—ã
- **–û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤:** comprehensive –æ—Ç—á–µ—Ç—ã –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–π
- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤—ã–¥–∞—á–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º JOIN
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- `404` - –ü—Ä–æ–¥—É–∫—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ
- `403` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å office_worker –∏–ª–∏ –≤—ã—à–µ)
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö

**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ legacy –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü
- –ü–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–∫–∞–∑–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–º–µ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞

---

## Troubleshoot API - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏

–ì—Ä—É–ø–ø–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –∏–º–µ—é—â–∏–º–∏ –ø—Ä–æ–±–ª–µ–º—ã. –í–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —à—Ç—Ä–∞—Ñ–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

### –ë–∞–∑–æ–≤—ã–π URL
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É: `http://your-domain/api/`

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ cookies. –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞:
- `office_worker` - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ñ–∏—Å–∞
- `junior_admin` - –º–ª–∞–¥—à–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä  
- `senior_admin` - —Å—Ç–∞—Ä—à–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- `owner` - –≤–ª–∞–¥–µ–ª–µ—Ü

---

## 1. GET /api/get-problem-products

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏

**–î–æ—Å—Ç—É–ø:** `office_worker`, `junior_admin`, `senior_admin`, `owner`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "problem_products": [
    {
      "id": 123,
      "name": "–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä Samsung",
      "description": "–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä 10000mAh",
      "category": "–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã",
      "size": "—Å—Ä–µ–¥–Ω–∏–π",
      "location": {
        "type": "office",
        "id": 1,
        "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 10"
      },
      "last_order": {
        "order_id": 456,
        "client_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "client_phone": "89001234567",
        "end_time": "2024-08-20 15:30:00",
        "returned": true,
        "comment": "–¢–æ–≤–∞—Ä –ø–æ–≤—Ä–µ–∂–¥–µ–Ω –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ"
      },
      "reservation_status": {
        "is_reserved": false,
        "reserved_by": null,
        "reservation_start": null
      }
    }
  ],
  "total_count": 5
}
```

---

## 2. POST /api/solve-problem/{product_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–æ–≤–∞—Ä–æ–º

**–î–æ—Å—Ç—É–ø:** `office_worker`, `junior_admin`, `senior_admin`, `owner`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `product_id` (int) - ID —Ç–æ–≤–∞—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–ª–∞ (Form):**
- `solution_comment` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã
- `mark_as_solved` (boolean, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true) - –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—É—é

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
POST /api/solve-problem/123
Content-Type: application/x-www-form-urlencoded

solution_comment=–ó–∞–º–µ–Ω–µ–Ω –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –∫–æ—Ä–ø—É—Å&mark_as_solved=true
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ü—Ä–æ–±–ª–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω–∞",
  "product_id": 123,
  "solved": true
}
```

---

## 3. POST /api/create-fine/{product_id}

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞ –∑–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ/–ø–æ—Ç–µ—Ä—é —Ç–æ–≤–∞—Ä–∞

**–î–æ—Å—Ç—É–ø:** `junior_admin`, `senior_admin`, `owner`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `product_id` (int) - ID —Ç–æ–≤–∞—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–ª–∞ (Form):**
- `fine_amount` (float, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –°—É–º–º–∞ —à—Ç—Ä–∞—Ñ–∞ –≤ —Ä—É–±–ª—è—Ö
- `fine_reason` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –ü—Ä–∏—á–∏–Ω–∞ —à—Ç—Ä–∞—Ñ–∞
- `client_id` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - ID –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–®—Ç—Ä–∞—Ñ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω",
  "fine_details": {
    "product_id": 123,
    "client_id": "89001234567",
    "client_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "client_phone": "89001234567",
    "amount": 1500.00,
    "reason": "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –∫–æ—Ä–ø—É—Å–∞",
    "created_by": "junior_admin ID:5",
    "created_at": "2024-08-21 14:30:00"
  }
}
```

---

## üí≥ API –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã CloudPayments

### –ü—Ä–∏–≤—è–∑–∫–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç

#### GET `/api/payments/card-binding-form`
–§–æ—Ä–º–∞ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `user_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û—Ç–≤–µ—Ç:**
HTML —Ñ–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã –∏ –ø—Ä–∏–≤—è–∑–∫–∏ —á–µ—Ä–µ–∑ CloudPayments.

---

#### POST `/api/payments/cloudpayments-webhook`
Webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç CloudPayments –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–µ–π.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç CloudPayments –≤ —Ñ–æ—Ä–º–∞—Ç–µ `application/x-www-form-urlencoded`.

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
- –ü–ª–∞—Ç–µ–∂–∏ –Ω–∞ —Å—É–º–º—É 11 —Ä—É–±–ª–µ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –ø—Ä–∏–≤—è–∑–∫–∞ –∫–∞—Ä—Ç—ã
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ –∫–∞—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å —Ç–æ–∫–µ–Ω–æ–º –¥–ª—è –±—É–¥—É—â–∏—Ö —Å–ø–∏—Å–∞–Ω–∏–π
- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `payment_transactions`

**–û—Ç–≤–µ—Ç:**
```json
{
  "code": 0  // 0 = —É—Å–ø–µ—Ö, –¥—Ä—É–≥–∏–µ –∫–æ–¥—ã = –æ—à–∏–±–∫–∞
}
```

---

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### GET `/api/payments/cards/{user_id}`
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "cards": [
    {
      "id": 1,
      "last4_digits": "1234",
      "card_type": "Visa",
      "created_at": "2024-01-15T10:30:00"
    }
  ]
}
```

---

### –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### POST `/api/payments/charge`
–°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": "123",
  "card_id": 1,
  "amount": 100.50,
  "order_id": "order_456"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "transaction_id": "12345678",
  "message": "–ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω"
}
```

---

## üì± API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram

### –í–∏–¥–∂–µ—Ç –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Telegram

#### GET `/api/telegram/login-widget`
–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å Telegram Login Widget –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–û—Ç–≤–µ—Ç:**
HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤–∏–¥–∂–µ—Ç–æ–º –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Telegram.

---

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Telegram –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏

#### POST `/api/telegram/verify-auth`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": "123",
  "telegram_data": {
    "id": "987654321",
    "first_name": "–ò–≤–∞–Ω",
    "last_name": "–ò–≤–∞–Ω–æ–≤",
    "username": "ivanov_ivan",
    "auth_date": "1642234567",
    "hash": "abc123def456"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Telegram —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∞–∫–∫–∞—É–Ω—Ç—É",
  "telegram_id": "987654321",
  "username": "ivanov_ivan",
  "first_name": "–ò–≤–∞–Ω"
}
```

---

## üí∞ API —Å–∏—Å—Ç–µ–º—ã —à—Ç—Ä–∞—Ñ–æ–≤

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞–º–∏

#### POST `/api/create-fine`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à—Ç—Ä–∞—Ñ–∞.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–ª—å: `junior_admin`, `senior_admin`, `owner`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (form-data):**
- `user_id` (int) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `product_id` (int) - ID —Ç–æ–≤–∞—Ä–∞
- `fine_amount` (float) - –°—É–º–º–∞ —à—Ç—Ä–∞—Ñ–∞
- `fine_reason` (string) - –ü—Ä–∏—á–∏–Ω–∞ —à—Ç—Ä–∞—Ñ–∞
- `fine_description` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `order_id` (int, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - ID —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- `due_days` (int, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 14) - –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –≤ –¥–Ω—è—Ö

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "fine_id": 123,
  "message": "–®—Ç—Ä–∞—Ñ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω"
}
```

---

#### GET `/api/fines`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —à—Ç—Ä–∞—Ñ–æ–≤.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–ª—å: `junior_admin`, `senior_admin`, `owner`

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "fines": [
    {
      "fine_id": 123,
      "user_phone": "+79123456789",
      "user_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "amount": 500.00,
      "reason": "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
      "status": "unpaid",
      "created_at": "2024-01-15T10:30:00",
      "paid_at": null,
      "notes": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è"
    }
  ]
}
```

---

### –ü–∞–Ω–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞

#### GET `/owner/fines`
–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à—Ç—Ä–∞—Ñ–∞–º–∏ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–ª—å: `owner`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —à—Ç—Ä–∞—Ñ–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —à—Ç—Ä–∞—Ñ–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã
- –£–¥–∞–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–æ–≤

---

### –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ä—à–µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### GET `/admin-senior/fines`
–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à—Ç—Ä–∞—Ñ–∞–º–∏ –¥–ª—è —Å—Ç–∞—Ä—à–µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –†–æ–ª—å: `senior_admin`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —à—Ç—Ä–∞—Ñ–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —à—Ç—Ä–∞—Ñ–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã
- –£–¥–∞–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–æ–≤

---

## üìã –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### UserCard (–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```json
{
  "id": 1,
  "user_id": "123",
  "card_token": "tk_abc123def456",
  "last4_digits": "1234",
  "card_type": "Visa",
  "created_at": "2024-01-15T10:30:00",
  "is_active": true
}
```

### TelegramUser (–¥–∞–Ω–Ω—ã–µ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```json
{
  "id": 1,
  "user_id": "123",
  "telegram_id": 987654321,
  "telegram_username": "ivanov_ivan",
  "first_name": "–ò–≤–∞–Ω",
  "last_name": "–ò–≤–∞–Ω–æ–≤",
  "phone_number": "+79123456789",
  "verified_at": "2024-01-15T10:30:00",
  "is_verified": true
}
```

### PaymentTransaction (–∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
```json
{
  "id": 1,
  "transaction_id": "12345678",
  "user_id": "123",
  "order_id": "order_456",
  "amount": "100.50",
  "currency": "RUB",
  "status": "Completed",
  "operation_type": "Payment",
  "card_first_six": "123456",
  "card_last_four": "1234",
  "card_type": "Visa",
  "gateway_name": "CloudPayments",
  "test_mode": false,
  "created_at": "2024-01-15T10:30:00",
  "updated_at": "2024-01-15T10:30:00",
  "raw_data": "{\"full_json_from_cloudpayments\": \"...\"}"
}
```

### Fines (—Å–∏—Å—Ç–µ–º–∞ —à—Ç—Ä–∞—Ñ–æ–≤)
```json
{
  "fine_id": 123,
  "user_phone": "+79123456789",
  "user_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "amount": 500.00,
  "reason": "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
  "status": "unpaid",  // unpaid, paid, pending, cancelled
  "created_at": "2024-01-15T10:30:00",
  "paid_at": null,
  "payment_transaction_id": "12345678",
  "created_by_worker_id": 5,
  "notes": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è"
}
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API –∫–ª—é—á–∏
–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ API –∫–ª—é—á–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
X-API-Key: your_api_key_here
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# CloudPayments
CLOUDPAYMENTS_PUBLIC_ID=pk_your_public_id
CLOUDPAYMENTS_API_SECRET=your_api_secret

# Telegram Bot
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
BOT_USERNAME=your_bot_username

# API –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
API_KEY=your_secure_api_key
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
python create_payment_tables.py
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:
- `user_cards` - –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `telegram_users` - –¥–∞–Ω–Ω—ã–µ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `payment_transactions` - –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `fines` - —Å–∏—Å—Ç–µ–º–∞ —à—Ç—Ä–∞—Ñ–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CloudPayments
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ CloudPayments
2. –ü–æ–ª—É—á–∏—Ç–µ Public ID –∏ API Secret
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL: `https://your-domain.com/api/payments/cloudpayments-webhook`
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –¥–ª—è Login Widget
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
